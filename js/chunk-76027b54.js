(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76027b54"],{"1d52":function(t,e,a){},2423:function(t,e,a){"use strict";const s={api_article_list:"/api/article/posts",api_article_more:"/api/article/post",api_article_brother:"/api/article/brother",api_article_comments:"/api/article/comments",api_article_search:"/api/article/search",api_article_likes:"/api/article/likes",api_article_shares:"/api/article/shares"};e["a"]=s},"3e43":function(t,e,a){"use strict";a("e698")},4601:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard"},[a("el-menu",{staticClass:"el-menu",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("文章管理")]),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[t._v("统计数据管理")]),a("el-menu-item",{attrs:{index:"2-1"}},[t._v("访问量管理")]),a("el-menu-item",{attrs:{index:"2-2"}},[t._v("分享量管理")]),a("el-menu-item",{attrs:{index:"2-3"}},[t._v("点赞量管理")]),a("el-menu-item",{attrs:{index:"2-4"}},[t._v("评论 管理")]),a("el-menu-item",{attrs:{index:"2-5"}},[t._v("统计可视化")])],2),a("el-menu-item",{attrs:{index:"3"}},[t._v("专栏管理")]),a("el-menu-item",{attrs:{index:"4"}},[t._v("留言管理")]),a("el-menu-item",{attrs:{index:"5"},on:{click:t.logout}},[t._v("退出登录")]),a("el-menu-item",{attrs:{index:"6"}},[a("a",{attrs:{href:"/"}},[t._v("返回主页")])])],1),a("div",{staticClass:"dynamic-area"},[a(t.dynamic_com,{tag:"component"})],1)],1)},o=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"post-card"},[a("h3",{staticStyle:{padding:"10px 4px"}},[t._v("注意在此处上传文章包含创建和更新方式")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-upload",{staticClass:"upload",attrs:{name:"uploadmd",drag:"",headers:t.insert_token,action:t.upload_url,"on-success":t.success,"on-error":t.fail}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传md文件")])])],1),a("el-col",{attrs:{span:12}},[a("el-button",{on:{click:function(e){t.add_post_open=!t.add_post_open}}},[t._v("新建文章")]),a("el-button",{attrs:{type:"primary"},on:{click:t.export_all_post}},[t._v("导出全部文章")]),a("el-button",{attrs:{type:"success"}},[t._v("导出数据库")]),a("el-button",{attrs:{type:"warning"},on:{click:t.back_up_db}},[t._v("备份数据库")])],1)],1),a("div",{attrs:{id:"post-list"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{id:"post-list-inner",data:t.postData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"URI",sortable:"",width:"160"}}),a("el-table-column",{attrs:{prop:"title",sortable:"",label:"标题"}}),a("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleOpen(e.$index,e.row.name)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row.name)}}},[t._v("打开")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.export_post(e.row.name)}}},[t._v("导出")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row.name)}}},[t._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"文章更新",visible:t.post_edit,width:"80%"},on:{"update:visible":function(e){t.post_edit=e}}},[a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[a("template",{slot:"prepend"},[t._v("URI")])],2),a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.newname,callback:function(e){t.newname=e},expression:"newname"}},[a("template",{slot:"prepend"},[t._v("新URI")])],2),a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}},[a("template",{slot:"prepend"},[t._v("标题")])],2),a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.date_plus,callback:function(e){t.date_plus=e},expression:"date_plus"}},[a("template",{slot:"prepend"},[t._v("日期")])],2),a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}},[a("template",{slot:"prepend"},[t._v("标签")])],2),a("el-switch",{staticStyle:{"margin-bottom":"20px"},attrs:{"active-text":"置顶","inactive-text":"取消置顶"},model:{value:t.pin,callback:function(e){t.pin=e},expression:"pin"}}),a("el-upload",{ref:"upload",attrs:{name:"uploadmd",action:t.api_post_update,limit:1,"http-request":t.upload_file,"on-error":t.update_post_err,"on-success":t.update_post_success}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传更新文件")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("本方式默认读取md文件内容作为正文内容")])],1),a("br"),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){return t.export_post()}}},[t._v("导 出")]),a("el-button",{on:{click:function(e){t.post_edit=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.update_post}},[t._v("更 新")])],1)],1),a("el-dialog",{attrs:{title:"文章编辑",visible:t.post_open,width:"94%"},on:{"update:visible":function(e){t.post_open=e}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{staticStyle:{color:"#404040","font-weight":"bold"},model:{value:t.post_open_title,callback:function(e){t.post_open_title=e},expression:"post_open_title"}},[a("template",{slot:"prepend"},[t._v("标题")])],2)],1),a("el-col",{attrs:{span:16}},[a("el-input",{model:{value:t.post_open_tags,callback:function(e){t.post_open_tags=e},expression:"post_open_tags"}},[a("template",{slot:"prepend"},[t._v("标签")])],2)],1)],1),a("el-input",{staticStyle:{"margin-top":"10px"},attrs:{type:"textarea",rows:16,placeholder:"正文内容"},model:{value:t.post_open_content,callback:function(e){t.post_open_content=e},expression:"post_open_content"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.post_open=!1}}},[t._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.update_post_all}},[t._v("更 新")])],1)],1),a("el-dialog",{attrs:{title:"新增文章",visible:t.add_post_open,width:"70%"},on:{"update:visible":function(e){t.add_post_open=e}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{staticStyle:{color:"#404040","font-weight":"bold"},attrs:{placeholder:"必填"},model:{value:t.add_post_name,callback:function(e){t.add_post_name=e},expression:"add_post_name"}},[a("template",{slot:"prepend"},[t._v("文件名")])],2)],1),a("el-col",{attrs:{span:16}},[a("el-input",{model:{value:t.get_date,callback:function(e){t.get_date=e},expression:"get_date"}},[a("template",{slot:"prepend"},[t._v("日期")])],2)],1)],1),a("br"),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{staticStyle:{color:"#404040","font-weight":"bold"},model:{value:t.add_post_title,callback:function(e){t.add_post_title=e},expression:"add_post_title"}},[a("template",{slot:"prepend"},[t._v("标题")])],2)],1),a("el-col",{attrs:{span:16}},[a("el-input",{model:{value:t.add_post_tags,callback:function(e){t.add_post_tags=e},expression:"add_post_tags"}},[a("template",{slot:"prepend"},[t._v("标签")])],2)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.add_post_open=!1}}},[t._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.add_post}},[t._v("新 增")])],1)],1)],1)},i=[],n=a("5fd4"),r=a("40bd"),d=(a("2423"),{name:"post_card",data(){return{upload_url:r["a"].api_url+n["a"].upload_file,postData:[],post_edit:!1,post_open:!1,add_post_open:!1,post_data:{},name:"",newname:"",title:"",date_plus:"",tags:"",pin:!1,post_open_name:"",post_open_title:"",post_open_tags:"",post_open_abstract:"",post_open_content:"",add_post_name:"",add_post_title:"",add_post_date:this.get_date,add_post_tags:"",api_post_update:n["a"].post+"?type=file&name="+this.name}},mounted(){this.getPostsData()},computed:{insert_token(){let t=localStorage.getItem("token");return{admin_token:t}},get_date(){let t=new Date((new Date).getTime()),e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate(),o=t.getHours(),l=t.getMinutes(),i=t.getSeconds(),n=e+"-"+(a<10?"0"+a:a)+"-"+(s<10?"0"+s:s)+" "+(o<10?"0"+o:o)+":"+(l<10?"0"+l:l)+":"+(i<10?"0"+i:i);return n}},methods:{success(t){"fail"===t.data?this.$message.error("文章上传失败\n"+t.msg):(this.$message.success("文章上传成功"),this.getPostsData())},fail(t){this.$message.error("文章上传失败")},getPostsData(){this.$http.get(n["a"].post).then(t=>{t.data.data&&""!==t.data.data&&0!==t.data.data.length?this.postData=t.data.data:this.$message.error("获取文章列表失败")})},handleDelete(t,e){let a={name:e};this.$http.delete(n["a"].post,{data:a}).then(t=>{"fail"===t.data.data?this.$message.error("文章"+e+"删除失败"):(this.$message.success("文章"+e+"删除成功"),this.getPostsData())})},handleOpen(t,e){e&&this.$http(n["a"].post+"?name="+e).then(t=>{"fail"!==t.data.data?(this.post_open_name=e,this.post_open_title=t.data.data.title,this.post_open_tags=t.data.data.tags,this.post_open_abstract=t.data.data.abstract,this.post_open_content=t.data.data.content,this.post_open=!0):this.$message.error("获取文章内容失败")})},handleEdit(t,e){this.$http.get(n["a"].post+"?name="+e).then(t=>{if(""!==t.data.data){let e=t.data.data;this.name=e.name,this.newname=e.name,this.title=e.title,this.date_plus=e.date_plus,this.tags=e.tags,this.pin=1===e.pin,this.post_edit=!0}else this.$message.error("获取文章内容失败")})},clear_data(){this.name=this.newname=this.title=this.date_plus="",this.tags="",this.pin=!1},upload_file(t){let e=new FormData;e.append("uploadmd",t.file),this.$http.post(n["a"].post+"?type=file&name="+this.name,e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{"success"===e.data.data?t.onSuccess("上传成功"):t.onError("上传失败")}).catch(()=>{t.onError("上传失败")})},update_post(){let t="args",e={name:this.name,newname:this.newname,title:this.title,date:this.date_plus,tags:this.tags,pin:this.pin?1:0};this.$http.put(n["a"].post+"?type="+t,e).then(t=>{"success"===t.data.data?(this.$message.success("文章更新成功"),this.post_edit=!1,this.clear_data()):this.$message.error("文章更新失败")})},update_post_all(){let t=n["a"].post+"?type=editor",e={name:this.post_open_name,title:this.post_open_title,tags:this.post_open_tags,content:this.post_open_content};this.$http.put(t,e).then(t=>{"fail"!==t.data.data?(this.$message.success("更新文章成功"),this.post_open=!1,this.post_open_name="",this.post_open_title="",this.post_open_tags="",this.post_open_abstract="",this.post_open_content=""):this.$message.error("更新文章失败")})},update_post_err(){this.$message.error("更新正文内容失败")},update_post_success(){this.$message.success("更新正文内容成功")},export_all_post(){this.$http.post(n["a"].export_file).then(t=>{if("fail"!==t.data.data){let e=new JSZip;for(let a of t.data.data){let t=""!==a.tags?a.tags.split(" ").join(","):"",s=""!==a.categories?a.categories.split(" ").join(","):"",o=`---\ntitle: ${a.title}\nname: ${a.name}\ndate: ${a.date_plus}\nid: 0\ntags: [${t}]\ncategories: [${s}]\nabstract: ""\n---\n${a.abstract}\n\x3c!--more--\x3e\n${a.content}`;e.file(a.name+".md",o)}e.generateAsync({type:"blob"}).then((function(t){saveAs(t,"posts.zip")}))}else this.$message.error("获取文章失败")})},export_post(t=""){let e=t||this.name,a="?name="+e,s=e+".md",o="";this.$http.post(n["a"].export_file+a).then(t=>{if("fail"!==t.data.data){let e=""!==t.data.data.tags?t.data.data.tags.split(" ").join(","):"",a=""!==t.data.data.categories?t.data.data.categories.split(" ").join(","):"";o=`---\ntitle: ${t.data.data.title}\nname: ${t.data.data.name}\ndate: ${t.data.data.date_plus}\nid: 0\ntags: [${e}]\ncategories: [${a}]\nabstract: ""\n---\n${t.data.data.abstract}\n\x3c!--more--\x3e\n${t.data.data.content}`;let l=new File([o],s,{type:"text/plain;charset=utf-8"});saveAs(l)}else this.$message.error("获取文件内容失败")})},back_up_db(){this.$http.post(n["a"].db_back).then(t=>{"success"===t.data.data?this.$message.success("数据库备份完毕"):this.$message.error("数据库备份失败")})},add_post(){if(this.add_post_name){let t=this.add_post_title?this.add_post_title:this.add_post_name,e=this.get_date,a=this.add_post_tags?this.add_post_tags.split(" ").join(","):"",s={name:this.add_post_name,title:t,date:e,tags:a};console.log(s),this.$http.post(n["a"].add_post,s).then(t=>{"success"===t.data.data?(this.$message.success(this.name+"文章新增完毕"),this.add_post_name=this.add_post_title=this.add_post_tags="",this.add_post_open=!1,this.getPostsData()):this.$message.error("数据库备份失败")}).catch(()=>{this.$message.error("新增文章失败")})}else this.$message.error("文件名不能为空")}}}),p=d,c=(a("e922"),a("2877")),_=Object(c["a"])(p,l,i,!1,null,"669528a2",null),h=_.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"zhuanlan-card"},[a("p",{staticStyle:{padding:"10px 4px"}},[t._v("操作专栏 你可以任意创建和修改专栏")]),a("el-button",{staticStyle:{"margin-bottom":"10px"},on:{click:function(e){t.show=!0}}},[t._v("新建专栏")]),a("el-dialog",{attrs:{title:"新建专栏",visible:t.show,width:"80%","before-close":t.handleClose},on:{"update:visible":function(e){t.show=e}}},[a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[a("template",{slot:"prepend"},[t._v("别名")])],2),a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}},[a("template",{slot:"prepend"},[t._v("标题")])],2),a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.posts,callback:function(e){t.posts=e},expression:"posts"}},[a("template",{slot:"prepend"},[t._v("列表")])],2),a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}},[a("template",{slot:"prepend"},[t._v("描述")])],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.add_zhuanlan}},[t._v("新 建")])],1)],1),a("el-table",{staticStyle:{width:"100%","overflow-y":"auto"},attrs:{data:t.zlist,"max-height":"calc(100vh - 200px)",border:""}},[a("el-table-column",{attrs:{prop:"primary_id",label:"ID",sortable:"",width:"60"}}),a("el-table-column",{attrs:{label:"别名",sortable:"",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.row.name,callback:function(a){t.$set(e.row,"name",a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{sortable:"",width:"120px",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.row.title,callback:function(a){t.$set(e.row,"title",a)},expression:"scope.row.title"}})]}}])}),a("el-table-column",{attrs:{width:"200px",label:"列表"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.row.posts,callback:function(a){t.$set(e.row,"posts",a)},expression:"scope.row.posts"}})]}}])}),a("el-table-column",{attrs:{label:"描述"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.row.content,callback:function(a){t.$set(e.row,"content",a)},expression:"scope.row.content"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleUpdate(e.row,e.row.primary_id)}}},[t._v("更新")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row,e.row.primary_id)}}},[t._v("删除")])]}}])})],1)],1)},u=[],g={name:"zhuanlan_card",data(){return{show:!1,zlist:[],id:0,name:"",title:"",content:"",posts:""}},mounted(){this.get_zhuanlan()},methods:{get_zhuanlan(){this.$http.get(n["a"].zhuanlan).then(t=>{"fail"===t.data.data?this.$message.error("获取专栏失败"):this.zlist=t.data.data})},handleClose(){this.name="",this.title="",this.posts="",this.content=""},handleUpdate(t,e){if(""===t.posts.trim())this.$message.error("指定文章列表为空"),this.show=!1;else if(""===t.title.trim())this.$message.error("指定标题为空"),this.show=!1;else{let a={id:e,name:t.name,title:t.title,posts:this.format_posts(t.posts),content:t.content,date:t.date};this.$http.put(n["a"].zhuanlan,a).then(t=>{"success"===t.data.data?(this.$message("专栏更新完毕"),this.get_zhuanlan()):this.$message.error("专栏更新失败")})}},handleDelete(t,e){let a={id:e};this.$http.delete(n["a"].zhuanlan,{data:a}).then(t=>{"success"===t.data.data?(this.$message.success("专栏删除完毕"),this.get_zhuanlan()):this.$message.error("专栏删除失败")})},add_zhuanlan(){if(""===this.posts.trim())this.$message("指定文章列表为空"),this.show=!1;else if(""===this.title.trim())this.$message("指定标题为空"),this.show=!1;else{let t={id:0,name:this.name,title:this.title,posts:this.format_posts(this.posts),content:this.content,date:""};this.$http.put(n["a"].zhuanlan,t).then(t=>{"success"===t.data.data?(this.$message.success("专栏新建完毕"),this.show=!1,this.get_zhuanlan()):(this.$message.error("专栏新建失败"),this.show=!1)})}},format_posts(t){let e="";return e=t.replace(/，/g,","),e}}},b=g,v=Object(c["a"])(b,m,u,!1,null,"28128122",null),f=v.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message_card"},[a("p",{staticStyle:{padding:"10px 4px"}},[t._v("管理留言")]),a("el-table",{staticStyle:{width:"100%","overflow-y":"auto"},attrs:{data:t.message_list,"max-height":"calc(100vh - 200px)",border:""}},[a("el-table-column",{attrs:{prop:"primary_id",label:"ID",sortable:"",width:"80"}}),a("el-table-column",{attrs:{prop:"user",label:"用户",sortable:"",width:"100"}}),a("el-table-column",{attrs:{prop:"date",sortable:"",width:"120",label:"留言日期"}}),a("el-table-column",{attrs:{prop:"message",sortable:"",label:"留言"}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row.primary_id)}}},[t._v("删除")])]}}])})],1)],1)},$=[],x={name:"message_card",data(){return{message_list:[]}},mounted(){this.get_message_list()},methods:{get_message_list(){this.$http.get(n["a"].message).then(t=>{"fail"===t.data.data?this.$message.error("获取留言失败"):this.message_list=t.data.data})},handleDelete(t,e){let a={id:e};this.$http.delete(n["a"].message,{data:a}).then(t=>{"fail"===t.data.data?this.$message.error("留言"+e+"删除失败"):(this.$message.success("留言"+e+"删除成功"),this.get_message_list())})}}},k=x,y=Object(c["a"])(k,w,$,!1,null,"1bf07b26",null),S=y.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"view-card"},[a("p",{staticStyle:{padding:"10px"}},[t._v("访问量统计")]),a("el-table",{staticStyle:{width:"100%","overflow-y":"auto"},attrs:{data:t.view_list,"max-height":"calc(100vh - 200px)",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"文章URI",sortable:"",width:"100"}}),a("el-table-column",{attrs:{prop:"title",sortable:"",label:"标题"}}),a("el-table-column",{attrs:{sortable:"",width:"100",label:"访问量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.view,callback:function(a){t.$set(e.row,"view",a)},expression:"scope.row.view"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleUpdate(e.$index,e.row.name,e.row.view)}}},[t._v("更新")])]}}])})],1)],1)},z=[],D={name:"View_card",data(){return{view_list:[]}},mounted(){this.get_views()},methods:{get_views(){this.$http.get(n["a"].view).then(t=>{t.data.data?this.view_list=t.data.data:this.$message.error("获取访问量列表失败")})},handleUpdate(t,e,a){let s={name:e,count:parseInt(a,10)};this.$http.put(n["a"].view,s).then(t=>{"success"===t.data.data?(this.$message("更新访问量成功"),this.get_views()):this.$message.error("更新访问量失败")})}}},E=D,j=Object(c["a"])(E,C,z,!1,null,"1e8e214c",null),I=j.exports,O=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},U=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"share-card"},[a("p",{staticStyle:{padding:"10px"}},[t._v("分享量统计")])])}],P={name:"Share_card"},R=P,F=Object(c["a"])(R,O,U,!1,null,"e29d023c",null),M=F.exports,A=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},J=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"like-card"},[a("p",{staticStyle:{padding:"10px"}},[t._v("点赞量统计")])])}],L={name:"Like_card"},T=L,V=Object(c["a"])(T,A,J,!1,null,"7a742cd4",null),Z=V.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-card"},[a("p",{staticStyle:{padding:"10px"}},[t._v("文章评论统计")]),a("el-table",{staticStyle:{width:"100%","overflow-y":"auto"},attrs:{data:t.comments,"max-height":"calc(100vh - 200px)",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"文章URI",sortable:"",width:"100"}}),a("el-table-column",{attrs:{prop:"user",sortable:"",width:"160",label:"用户"}}),a("el-table-column",{attrs:{sortable:"",label:"评论"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.comment,callback:function(a){t.$set(e.row,"comment",a)},expression:"scope.row.comment"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.del_comment(e.row.name,e.row.primary_id)}}},[t._v("删除")])]}}])})],1)],1)},B=[],H={name:"Comment_card",data(){return{comments:[]}},mounted(){this.get_comments()},methods:{get_comments(){this.$http.get(n["a"].comment).then(t=>{t.data.data?this.comments=t.data.data:this.$message.error("获取评论失败")})},del_comment(t,e){let a={name:t,id:e};this.$http.delete(n["a"].comment,{data:a}).then(t=>{t.data.data&&"success"===t.data.data?(this.$message.success("评论删除成功"),this.get_comments()):this.$message.error("评论删除失败")})}}},Y=H,G=Object(c["a"])(Y,q,B,!1,null,"3842c4a8",null),K=G.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"charts"},[a("h2",{staticStyle:{"margin-bottom":"10px"}},[t._v("统计数据可视化")]),a("div",{attrs:{id:"article-part"}},[a("h3",[t._v("文章统计")]),a("p",{staticClass:"data-item"},[t._v("总数: "+t._s(t.post_count))]),a("h3",[t._v("最受欢迎的文章")]),a("p",{staticClass:"data-item"},[a("a",{staticStyle:{"text-decoration":"none",color:"white"},attrs:{href:"/p/"+t.post_most_like}},[t._v(t._s(t.post_most_like_name))])])]),a("canvas",{attrs:{id:"chart-view-all",width:"540",height:"420"}}),a("div",{attrs:{id:"view-part"}},[a("h3",[t._v("访问统计")]),a("p",{staticClass:"data-item"},[t._v("总数: "+t._s(t.view_count))])]),a("div",{attrs:{id:"comment-part"}},[a("h3",[t._v("评论统计")]),a("p",{staticClass:"data-item"},[t._v("总数: "+t._s(t.comment_count))])]),a("div",{attrs:{id:"like-part"}},[a("h3",[t._v("点赞统计")]),a("p",{staticClass:"data-item"},[t._v("总数: "+t._s(t.like_count))])]),a("div",{attrs:{id:"share-part"}},[a("h3",[t._v("分享统计")]),a("p",{staticClass:"data-item"},[t._v("总数: "+t._s(t.share_count))])])])},Q=[],W={name:"Show_card",data(){return{view_all:"",views:[],post_count:0,post_most_like:"",post_most_like_name:"",view_count:0,comment_count:0,like_count:0,share_count:0}},mounted(){this.get_post_count(),this.get_all_data(),this.get_view_count(),this.get_comment_count(),this.get_like_count(),this.get_share_count()},methods:{get_all_data(){this.$http.get(n["a"].view).then(t=>{let e=t.data.data.sort((function(t,e){return e.view-t.view}));this.view_all=e[0],this.view_all=t.data.data,this.views=t.data.data,this.post_most_like_name=this.view_all[1].title,this.post_most_like=this.view_all[1].name,this.draw_all_view()})},draw_all_view(){let t=document.getElementById("chart-view-all"),e=[],a=[];for(let o of this.views)"all"!==o.name&&(a.push(o.view),e.push(o.name));a.length>=10&&(a=a.slice(0,10),e=e.slice(0,10));let s={labels:e,datasets:[{label:"访问量",fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(151,187,205,0.75)",highlightStroke:"rgba(220,220,220,1)",data:a}]};new Chart(t,{type:"bar",data:s,options:{responsive:!1}})},get_post_count(){this.$http.get(n["a"].post).then(t=>{this.post_count=t.data.data.length})},get_comment_count(){this.$http.get(n["a"].comment+"?name=all").then(t=>{this.comment_count=t.data.data.length})},get_view_count(){let t=n["a"].view+"?name=all";this.$http.get(t).then(t=>{t.data.data&&(this.view_count=t.data.data)})},get_like_count(){let t=n["a"].like+"?name=all";this.$http.get(t).then(t=>{t.data.data&&(this.like_count=t.data.data)})},get_share_count(){let t=n["a"].share+"?name=all";this.$http.get(t).then(t=>{t.data.data&&(this.share_count=t.data.data)})}}},X=W,tt=(a("3e43"),Object(c["a"])(X,N,Q,!1,null,"8f610a36",null)),et=tt.exports,at={name:"dashboard",components:{Post_card:h,Zhuanlan_card:f,Message_card:S,View_card:I,Like_card:Z,Share_card:M,Comment_card:K,Show_card:et},data(){return{activeIndex:1,dynamic_com:"",components_map:{1:"Post_card","2-1":"View_card","2-2":"Share_card","2-3":"Like_card","2-4":"Comment_card","2-5":"Show_card",3:"Zhuanlan_card",4:"Message_card"}}},mounted(){this.dynamic_com="Post_card"},methods:{handleSelect(t,e){this.dynamic_com=this.components_map[t]},logout(){localStorage.removeItem("token"),this.$message("你已经登出 即将返回主页"),setTimeout(()=>{this.$router.push("/")},1500)}}},st=at,ot=(a("c48c"),Object(c["a"])(st,s,o,!1,null,"2eb0cc4c",null));e["default"]=ot.exports},"5fd4":function(t,e,a){"use strict";const s={login:"/api/admin/login",logout:"/api/admin/logout",upload_file:"/api/dashboard/post/upload",export_file:"/api/dashboard/post/export",db_back:"/api/dashboard/db/backup",add_post:"/api/dashboard/post/add",post:"/api/dashboard/post",comment:"/api/dashboard/comment",zhuanlan:"/api/dashboard/zhuanlan",message:"/api/dashboard/message",view:"/api/dashboard/view",like:"/api/dashboard/like",share:"/api/dashboard/share"};e["a"]=s},"6f67":function(t,e,a){},c48c:function(t,e,a){"use strict";a("1d52")},e698:function(t,e,a){},e922:function(t,e,a){"use strict";a("6f67")}}]);