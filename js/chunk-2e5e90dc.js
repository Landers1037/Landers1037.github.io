(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e5e90dc"],{"1df7":function(t,e,a){"use strict";a("ae20")},2423:function(t,e,a){"use strict";const s={api_article_list:"/api/article/posts",api_article_more:"/api/article/post",api_article_brother:"/api/article/brother",api_article_comments:"/api/article/comments",api_article_search:"/api/article/search",api_article_likes:"/api/article/likes",api_article_shares:"/api/article/shares"};e["a"]=s},"393a":function(t,e,a){"use strict";a("8ba8")},"5bd2":function(t,e,a){},7446:function(t,e,a){"use strict";a("f077")},"7d62":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bottom"},[a("p",[a("el-icon",{staticClass:"el-icon-lollipop"}),a("a",{staticStyle:{color:"#5f5f5f","font-weight":"bold","margin-right":"8px"},attrs:{href:t.custom.bottom_url}},[t._v(t._s(t.custom.bottom_tag))]),a("el-icon",{staticClass:"el-icon-coffee-cup"}),a("a",{staticStyle:{color:"#5f5f5f","font-weight":"bold"},attrs:{href:t.custom.bottom_url2}},[t._v(t._s(t.custom.bottom_tag2))]),a("br"),a("span",{staticStyle:{"font-size":"12px"},attrs:{id:"bottom-span"}},[t._v(t._s(t.custom.bottom_span))])],1)])},i=[],o=a("40bd"),l={name:"bottom_banner",data(){return{custom:o["a"]}}},n=l,r=(a("d659"),a("d12e"),a("2877")),c=Object(r["a"])(n,s,i,!1,null,"9a2ba0d6",null);e["a"]=c.exports},"8ba8":function(t,e,a){},"8dc4":function(t,e,a){"use strict";a("d365")},"95a6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"post"},[a("top_banner"),a("div",{staticClass:"title"},[a("p",[t._v(t._s(t.title))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.theme_control,expression:"theme_control"}],attrs:{id:"theme"}},[a("el-select",{attrs:{placeholder:"代码主题"},on:{change:t.change_theme},model:{value:t.theme,callback:function(e){t.theme=e},expression:"theme"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("p",{staticStyle:{color:"#afafaf","font-size":"12px","font-weight":"bold"}},[t._v(t._s(t.date))]),a("div",{staticClass:"wrapper animated fadeIn"},[a("div",{staticClass:"markdown-body gallery",attrs:{id:"markdown-body"},domProps:{innerHTML:t._s(t.post)}}),a("div",{staticStyle:{padding:"10px"}},t._l(t.tags,(function(e){return a("el-tag",{directives:[{name:"show",rawName:"v-show",value:e,expression:"tag"}],key:e,staticStyle:{margin:"0 4px"},attrs:{type:"info"}},[a("a",{staticStyle:{color:"#909399"},attrs:{href:"/t/"+e}},[t._v(t._s(e))])])})),1),a("div",{staticClass:"comment-wrapper"},[a("el-divider"),a("div",{attrs:{id:"comments"}},[a("div",{staticStyle:{"margin-bottom":"1rem"}},[a("el-badge",{staticClass:"item",attrs:{value:t.comments_count}},[a("el-button",{attrs:{disabled:"",size:"small"}},[t._v("评论")])],1),a("el-badge",{staticClass:"item",attrs:{value:t.post_likes,type:"primary"}},[a("el-button",{attrs:{size:"small"},on:{click:t.send_likes}},[t._v("点赞")])],1),a("el-badge",{staticClass:"item",attrs:{value:t.post_shares,type:"success"}},[a("el-button",{attrs:{size:"small"},on:{click:t.send_shares}},[t._v("分享")])],1)],1),t._l(t.comments_list,(function(e){return a("div",{key:e.primary_id,staticStyle:{border:"1px solid #e1e4e8","margin-bottom":".6rem","border-radius":"4px"}},[a("div",{staticStyle:{"background-color":"#f6f8fa",color:"#909399","font-size":".85rem","font-weight":"bold",padding:"10px","border-bottom":"1px solid #e1e4e8"}},[a("span",{staticStyle:{color:"#586069","margin-right":".6rem"}},[t._v(t._s(e.user?e.user:"匿名"))]),a("span",[t._v("评论于 "+t._s(e.date))])]),a("div",{staticClass:"markdown-body",staticStyle:{padding:"10px"},domProps:{innerHTML:t._s(t.preview_code(e.comment))}})])}))],2),a("div",{attrs:{id:"user-comment"}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"撰写评论"}},[a("div",[a("el-input",{attrs:{id:"raw_textarea",type:"textarea","show-word-limit":"",clearable:"",maxlength:"200",rows:4,placeholder:"请输入内容"},model:{value:t.comment_text,callback:function(e){t.comment_text=e},expression:"comment_text"}})],1)]),a("el-tab-pane",{attrs:{label:"预览效果"}},[a("div",{staticClass:"markdown-body",staticStyle:{padding:"6px"},domProps:{innerHTML:t._s(t.preview_comment)}})]),a("el-input",{staticStyle:{width:"10rem","margin-top":"1rem"},attrs:{maxlength:"20",clearable:"",placeholder:"表明你是谁😎",size:"mini"},model:{value:t.comment_who,callback:function(e){t.comment_who=e},expression:"comment_who"}}),a("el-button",{staticStyle:{float:"right","margin-top":"1rem"},attrs:{type:"primary",size:"mini"},on:{click:t.send_comment}},[t._v("发布")])],1)],1)],1)]),a("div",{staticClass:"bt-group"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-back",size:"small",id:"prev"},on:{click:t.toprev}},[t._v("上一篇")]),a("el-button",{attrs:{type:"primary",id:"next",size:"small"},on:{click:t.tonext}},[t._v("下一篇"),a("i",{staticClass:"el-icon-arrow-right el-icon-right"})])],1),a("bottom_banner")],1)},i=[],o=a("cb37"),l=a("7d62"),n=a("40bd"),r=a("2423");function c(t){localStorage.setItem("code_theme",t)}function m(t){let e;return localStorage.getItem("code_theme")?(e=localStorage.getItem("code_theme"),e):""!==t?t:"github"}var d={name:"post",components:{Top_banner:o["a"],Bottom_banner:l["a"]},data(){return{custom:n["a"],url:this.$route.params.url,post:null,title:null,date:null,tags:[],comment_text:"",comment_who:"",preview_comment:"还没有任何内容",send_comment_tm:!1,comments_count:0,comments_list:[],post_likes:0,send_likes_tm:!1,post_shares:0,send_shares_tm:!1,prev:"",next:"",options:[{value:"atom-one-dark",label:"atom dark"},{value:"atom-one-light",label:"atom light"},{value:"dracula",label:"dracula"},{value:"github",label:"github"},{value:"monokai",label:"monokai"},{value:"monokai-sublime",label:"monokai sublime"},{value:"ocean",label:"ocean"},{value:"rainbow",label:"rainbow"},{value:"solarized-dark",label:"solarized dark"},{value:"solarized-light",label:"solarized light"},{value:"tomorrow",label:"tomorrow"},{value:"tomorrow-night",label:"tomorrow night"},{value:"xcode",label:"xcode"},{value:"xt256",label:"xterm"}],theme:"github",theme_control:!1}},created(){let t=this;t.init_theme()},watch:{comment_text(){this.preview_comment=marked(this.comment_text)}},mounted(){let t=this;this.$http.get(r["a"].api_article_more,{params:{name:this.url}}).then(e=>{let a=e.data.data["content"];t.title=e.data.data["title"],document.title=t.title+" . Blog",t.date=e.data.data["date"],t.tags=e.data.data.tags.split(" "),t.mk(a),t.$nextTick(()=>{this.theme_control=!0;let t=document.getElementsByTagName("pre");for(let e=0;e<t.length;e++)t[e].classList.add("hljs")})}).catch(e=>{this.theme_control=!0,t.$message.error("出现错误了，请求文章失败")}),this.loading(n["a"].loading_duration),this.brother(),this.get_comments(),this.get_likes(),this.get_shares()},methods:{back(){this.$router.push("/")},init(t){let e=this;this.$http.get(r["a"].api_article_more,{params:{name:t}}).then(t=>{let a=t.data.data["content"];e.title=t.data.data["title"],e.date=t.data.data["date"],e.mk(a),e.$nextTick(()=>{let t=document.getElementsByTagName("pre");for(let e=0;e<t.length;e++)t[e].classList.add("hljs")})}).catch(t=>{e.$message.error("出现错误了，请求文章失败")})},brother(){let t=this;this.$http.get(r["a"].api_article_brother,{params:{name:this.url}}).then(e=>{let a=e.data;a&&(t.prev=a[0],t.next=a[1])})},preview_code(t){return marked.setOptions({renderer:new marked.Renderer,highlight:function(t){return hljs.highlightAuto(t).value},pendantic:!1,gfm:!0,tables:!0,breaks:!0,sanitize:!1,smartLists:!0,xhtml:!1}),this.$nextTick(()=>{let t=document.getElementById("comments"),e=t.getElementsByTagName("pre");for(let s=0;s<e.length;s++)e[s].classList.add("hljs");let a=document.getElementById("user-comment");e=a.getElementsByTagName("pre");for(let s=0;s<e.length;s++)e[s].classList.add("hljs")}),marked(t)},mk(t){marked.setOptions({renderer:new marked.Renderer,highlight:function(t){return hljs.highlightAuto(t).value},pendantic:!1,gfm:!0,tables:!0,breaks:!0,sanitize:!1,smartLists:!0,xhtml:!1}),this.$nextTick(()=>{this.reformat_images(),this.reformat_head()}),this.post=marked(t)},loading(t){const e=this.$loading({lock:!0,text:"文章加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(()=>{e.close()},t)},handleScrollTop(){window.scrollTo(0,0)},toprev(){""!==this.prev&&(this.$router.push("/p/"+this.prev),this.init(this.prev),this.handleScrollTop(),this.loading(n["a"].loading_duration),this.url=this.prev,this.brother())},tonext(){""!==this.next&&(this.$router.push("/p/"+this.next),this.init(this.next),this.handleScrollTop(),this.loading(n["a"].loading_duration),this.url=this.next,this.brother())},init_theme(){this.theme=m(n["a"].default_theme),this.change_theme()},change_theme(){document.getElementsByTagName("head")[0];let t=document.getElementById("dynamic-theme"),e="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.6.0/build/styles/",a=this.theme?e+this.theme+".min.css":e+n["a"].default_theme+".min.css";console.log("使用主题"+this.theme),c(this.theme),t.setAttribute("href",a)},reformat_images(){let t=document.getElementById("markdown-body"),e=t.getElementsByTagName("img");for(let a=0;a<e.length;a++)if(!e[a].getAttribute("lightbox")){let t=e[a].parentNode,s="images"+a,i=e[a].src,o=document.createElement("a");e[a].setAttribute("lightbox","true"),o.href=i,o.classList.add("spotlight"),o.setAttribute("data-image-alt",s),o.append(e[a]),t.append(o)}},reformat_head(){let t=document.getElementById("markdown-body"),e=t.querySelectorAll("h1, h2, h3");for(let a of e){let t='<svg className="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"\n                             aria-hidden="true">\n                            <path fill-rule="evenodd"\n                                  d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>\n</svg>',e=a.innerText,s=a.id;a.innerHTML='<a class="head-link" href="#'+s+'">'+t+"</a>"+e}},get_comments(){this.$http.get(r["a"].api_article_comments+"?name="+this.url).then(t=>{let e=t.data.data;e&&(this.comments_count=e.length,this.comments_list=e)})},send_comment(){if(!1!==this.send_comment_tm)return void this.$message("请稍后再试");this.send_comment_tm=!0,setTimeout(()=>{this.send_comment_tm=!1},1e3);let t=this.comment_text;if(!t||!this.url)return void this.$message.info("请输入有效的评论");let e={name:this.url,user:this.comment_who,comment:t};this.$http.post(r["a"].api_article_comments,e).then(t=>{let e=t.data.data;e&&(this.$message.success("评论发布成功"),this.comment_text="",this.get_comments())}).catch(()=>{this.$message.error("评论发布失败")})},get_likes(){this.$http.get(r["a"].api_article_likes+"?name="+this.url).then(t=>{t.data.data&&"failed"!==t.data.data&&(this.post_likes=t.data.data)})},get_shares(){this.$http.get(r["a"].api_article_shares+"?name="+this.url).then(t=>{t.data.data&&"failed"!==t.data.data&&(this.post_shares=t.data.data)})},send_likes(){this.send_likes_tm?this.$message.info("请不要重复点击"):(this.send_likes_tm=!0,setTimeout(()=>{this.send_likes_tm=!1},2e3),this.$http.post(r["a"].api_article_likes,{name:this.url}).then(t=>{t.data.data&&"success"===t.data.data?(this.$message.success("点赞完毕"),this.get_likes()):this.$message.success("点赞失败")}))},send_shares(){let t='<pre style="background-color: #f5f5f5;color: crimson;padding: 10px;border-radius: 4px">'+window.location.href+"</pre><br><strong>Copyright ©️ renj.io</strong>";this.$alert(t,"复制本文链接以分享",{dangerouslyUseHTMLString:!0,confirmButtonText:"我知道了",callback:t=>{this.$message.success("分享完毕"),this.$http.post(r["a"].api_article_shares,{name:this.url}).then(t=>{t.data.data&&"success"===t.data.data&&this.get_shares()})}})}}},h=d,u=(a("8dc4"),a("393a"),a("1df7"),a("7446"),a("2877")),p=Object(u["a"])(h,s,i,!1,null,"21e17cec",null);e["default"]=p.exports},a9b2:function(t,e,a){},ae20:function(t,e,a){},cb37:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"animated slideInDown"},[a("label",{attrs:{id:"title"},on:{click:t.back}},[t._v(t._s(t.custom.top_banner))])]),a("el-divider",[a("span",{staticStyle:{"font-family":"'mo',monospace","font-size":"14px"}},[t._v(" "+t._s(t.custom.top_span)+" ")])])],1)},i=[],o=a("40bd"),l={name:"top_banner",data(){return{custom:o["a"]}},methods:{back(){"/"===location.pathname?location.reload():this.$router.push("/")}}},n=l,r=(a("d212"),a("d072"),a("2877")),c=Object(r["a"])(n,s,i,!1,null,"7baa8a2b",null);e["a"]=c.exports},cc65:function(t,e,a){},d072:function(t,e,a){"use strict";a("5bd2")},d12e:function(t,e,a){"use strict";a("cc65")},d212:function(t,e,a){"use strict";a("a9b2")},d365:function(t,e,a){},d659:function(t,e,a){"use strict";a("e853")},e853:function(t,e,a){},f077:function(t,e,a){}}]);