(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d0d3944"],{"0b4d":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message"},[s("top_banner"),s("div",{staticClass:"box"},[s("p",[e._v("在这里写下你的留言")]),s("div",{staticClass:"messageBox"},e._l(e.messages,(function(t){return s("ul",{staticClass:"animated fadeInDown",attrs:{id:"mes"}},[s("i",{staticClass:"el-icon-chat-round",staticStyle:{"font-size":"20px","padding-right":"6px"}}),e._v(e._s(t.message))])})),0),s("el-input",{staticClass:"yourmes",attrs:{type:"textarea",placeholder:"请输入留言",maxlength:"300","show-word-limit":"",autosize:{minRows:4,maxRows:8}},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1),s("el-button",{staticClass:"btnSend",attrs:{icon:"el-icon-chat-square"},on:{click:e.sendmes}},[e._v("发表留言")])],1)},i=[],n=s("40bd");const o={api_message_all:"/api/message",api_message_add:"/api/message",api_message_delete:"/api/message"};var c=o,r=s("cb37"),d={name:"message",components:{Top_banner:r["a"]},data(){return{custom:n["a"],messages:[],textarea:"",saved:!1}},mounted(){this.getmes()},methods:{back(){this.$router.push("/")},getmes(){this.$http.get(c.api_message_all).then(e=>{this.messages=e.data})},sendmes(){let e={},t=this;this.textarea.trim().length>=4&&!t.saved?(e={mes:this.textarea},this.$http.post(c.api_message_add,e).then(e=>{"saved"===e.data?(t.tishi(),t.saved=!0,setTimeout((function(){t.getmes()}),500)):t.$message.error("留言失败，请重试")}).catch(e=>{this.$message({message:"你的留言没有成功保存，请稍后重试",type:"warning"})})):this.saved?(this.$message.error("你已经留言过了,请稍后再试"),setTimeout(()=>{this.saved=!1},1e3)):this.$message.error("你的留言至少应超过4个字符")},tishi(){this.$message({message:"注意哦，你发表的留言会在缓存中保留，稍后会写入数据库",type:"warning"})}}},l=d,m=(s("a537"),s("a99f"),s("2877")),u=Object(m["a"])(l,a,i,!1,null,"b972161e",null);t["default"]=u.exports},"4f0b":function(e,t,s){},"5bd2":function(e,t,s){},"62a6":function(e,t,s){},a537:function(e,t,s){"use strict";s("62a6")},a99f:function(e,t,s){"use strict";s("4f0b")},a9b2:function(e,t,s){},cb37:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("div",{staticClass:"animated slideInDown"},[s("label",{attrs:{id:"title"},on:{click:e.back}},[e._v(e._s(e.custom.top_banner))])]),s("el-divider",[s("span",{staticStyle:{"font-family":"'mo',monospace","font-size":"14px"}},[e._v(" "+e._s(e.custom.top_span)+" ")])])],1)},i=[],n=s("40bd"),o={name:"top_banner",data(){return{custom:n["a"]}},methods:{back(){"/"===location.pathname?location.reload():this.$router.push("/")}}},c=o,r=(s("d212"),s("d072"),s("2877")),d=Object(r["a"])(c,a,i,!1,null,"7baa8a2b",null);t["a"]=d.exports},d072:function(e,t,s){"use strict";s("5bd2")},d212:function(e,t,s){"use strict";s("a9b2")}}]);